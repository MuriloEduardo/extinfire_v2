webpackJsonp([2,10],{"/Zin":function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(3);Object.defineProperty(e,"conformToMask",{enumerable:!0,get:function(){return r(i).default}});var a=n(2);Object.defineProperty(e,"adjustCaretPosition",{enumerable:!0,get:function(){return r(a).default}});var o=n(5);Object.defineProperty(e,"createTextMaskInputElement",{enumerable:!0,get:function(){return r(o).default}})},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.placeholderChar="_"},function(t,e){"use strict";function n(t){var e=t.previousConformedValue,n=void 0===e?i:e,a=t.currentCaretPosition,o=void 0===a?0:a,s=t.conformedValue,d=t.rawValue,l=t.placeholderChar,c=t.placeholder,v=t.indexesOfPipedChars,u=void 0===v?r:v,p=t.caretTrapIndexes,m=void 0===p?r:p;if(0===o)return 0;var f=d.length,h=n.length,g=c.length,b=s.length,y=f-h,x=y>0,I=0===h;if(y>1&&!x&&!I)return o;var _=x&&(n===s||s===c),w=0;if(_)w=o-y;else for(var S=s.toLowerCase(),k=d.toLowerCase(),O=k.substr(0,o).split(i),M=O.filter(function(t){return-1!==S.indexOf(t)}),P=M[M.length-1],C=u.map(function(t){return S[t]}),j=C.filter(function(t){return t===P}).length,V=M.filter(function(t){return t===P}).length,R=c.substr(0,c.indexOf(l)).split(i).filter(function(t,e){return t===P&&d[e]!==t}).length,E=R+V+j,T=0,N=0;N<b;N++){var q=S[N];if(w=N+1,q===P&&T++,T>=E)break}if(x){for(var D=w,A=w;A<=g;A++)if(c[A]===l&&(D=A),c[A]===l||-1!==m.indexOf(A)||A===g)return D}else for(var L=w;L>=0;L--)if(c[L-1]===l||-1!==m.indexOf(L)||0===L)return L}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var r=[],i=""},function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.guide,s=void 0===r||r,d=n.previousConformedValue,l=void 0===d?o:d,c=n.placeholderChar,v=void 0===c?a.placeholderChar:c,u=n.placeholder,p=void 0===u?(0,i.convertMaskToPlaceholder)(e,v):u,m=n.currentCaretPosition,f=n.keepCharPositions,h=!1===s&&void 0!==l,g=t.length,b=l.length,y=p.length,x=e.length,I=g-b,_=I>0,w=m+(_?-I:0),S=w+Math.abs(I);if(!0===f&&!_){for(var k=o,O=w;O<S;O++)p[O]===v&&(k+=v);t=t.slice(0,w)+k+t.slice(w,g)}for(var M=t.split(o).map(function(t,e){return{char:t,isNew:e>=w&&e<S}}),P=g-1;P>=0;P--){var C=M[P].char;if(C!==v){C===p[P>=w&&b===x?P-I:P]&&M.splice(P,1)}}var j=o,V=!1;t:for(var R=0;R<y;R++){var E=p[R];if(E===v){if(M.length>0)for(;M.length>0;){var T=M.shift(),N=T.char,q=T.isNew;if(N===v&&!0!==h){j+=v;continue t}if(e[R].test(N)){if(!0===f&&!1!==q&&l!==o&&!1!==s&&_){for(var D=M.length,A=null,L=0;L<D;L++){var F=M[L];if(F.char!==v&&!1===F.isNew)break;if(F.char===v){A=L;break}}null!==A?(j+=N,M.splice(A,1)):R--}else j+=N;continue t}V=!0}!1===h&&(j+=p.substr(R,y));break}j+=E}if(h&&!1===_){for(var U=null,z=0;z<j.length;z++)p[z]===v&&(U=z);j=null!==U?j.substr(0,U+1):o}return{conformedValue:j,meta:{someCharsRejected:V}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=n(4),a=n(1),o=""},function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.placeholderChar;if(-1!==t.indexOf(e))throw new Error("Placeholder character must not be used as part of the mask. Please specify a character that is not present in your mask as your placeholder character.\n\nThe placeholder character that was received is: "+JSON.stringify(e)+"\n\nThe mask that was received is: "+JSON.stringify(t));return t.map(function(t){return t instanceof RegExp?e:t}).join("")}function i(t){return"string"==typeof t||t instanceof String}function a(t){return"number"==typeof t&&void 0===t.length&&!isNaN(t)}function o(t){for(var e=[],n=void 0;-1!==(n=t.indexOf(l));)e.push(n),t.splice(n,1);return{maskWithoutCaretTraps:t,indexes:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.convertMaskToPlaceholder=r,e.isString=i,e.isNumber=a,e.processCaretTraps=o;var s=n(1),d=[],l="[]"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e={previousConformedValue:void 0};return{state:e,update:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=r.inputElement,l=r.mask,v=r.guide,g=r.pipe,y=r.placeholderChar,x=void 0===y?m.placeholderChar:y,I=r.keepCharPositions,_=void 0!==I&&I;if(void 0===n&&(n=i.value),n!==e.previousConformedValue){(void 0===l?"undefined":d(l))===b&&void 0!==l.pipe&&void 0!==l.mask&&(g=l.pipe,l=l.mask);var w=void 0,S=void 0;if(l instanceof Array&&(w=(0,p.convertMaskToPlaceholder)(l,x)),!1!==l){var k=o(n),O=i.selectionStart,M=e.previousConformedValue,P=void 0;if((void 0===l?"undefined":d(l))===f){if(!1===(S=l(k,{currentCaretPosition:O,previousConformedValue:M,placeholderChar:x})))return;var C=(0,p.processCaretTraps)(S),j=C.maskWithoutCaretTraps,V=C.indexes;S=j,P=V,w=(0,p.convertMaskToPlaceholder)(S,x)}else S=l;var R={previousConformedValue:M,guide:v,placeholderChar:x,pipe:g,placeholder:w,currentCaretPosition:O,keepCharPositions:_},E=(0,u.default)(k,S,R),T=E.conformedValue,N=(void 0===g?"undefined":d(g))===f,q={};N&&(q=g(T,s({rawValue:k},R)),!1===q?q={value:M,rejected:!0}:(0,p.isString)(q)&&(q={value:q}));var D=N?q.value:T,A=(0,c.default)({previousConformedValue:M,conformedValue:D,placeholder:w,rawValue:k,currentCaretPosition:O,placeholderChar:x,indexesOfPipedChars:q.indexesOfPipedChars,caretTrapIndexes:P}),L=D===w&&0===A,F=L?h:D;e.previousConformedValue=F,i.value!==F&&(i.value=F,a(i,A))}}}}}function a(t,e){document.activeElement===t&&(y?x(function(){return t.setSelectionRange(e,e,g)},0):t.setSelectionRange(e,e,g))}function o(t){if((0,p.isString)(t))return t;if((0,p.isNumber)(t))return String(t);if(void 0===t||null===t)return h;throw new Error("The 'value' provided to Text Mask needs to be a string or a number. The value received was:\n\n "+JSON.stringify(t))}Object.defineProperty(e,"__esModule",{value:!0});var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=i;var l=n(2),c=r(l),v=n(3),u=r(v),p=n(4),m=n(1),f="function",h="",g="none",b="object",y="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),x="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:setTimeout}])})},"3r/n":function(t,e,n){"use strict";var r=n("3j3K"),i=n("2Je8");n.d(e,"a",function(){return o});var a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o},o=function(){function t(){}return t.prototype.transform=function(t,e,n,r){return void 0===e&&(e="BRL"),void 0===n&&(n=!0),t?new i.CurrencyPipe("pt-BR").transform(t,e,n,r):""},t}();o=a([n.i(r.Pipe)({name:"currencyformat"})],o)},"80KD":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("3j3K"),i=n("2Je8"),a=n("NVOs"),o=n("Fzro"),s=n("gwU6"),d=(n.n(s),n("xHUa")),l=(n.n(d),n("ur0Y")),c=(n.n(l),n("VWgf")),v=(n.n(c),n("eSKb")),u=(n.n(v),n("A8Rp")),p=n("biG6"),m=n("rZWe"),f=n("8Ipi"),h=n("rgVv"),g=n("3r/n");n.d(e,"VendasModule",function(){return y});var b=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o},y=function(){function t(){}return t}();y=b([n.i(r.NgModule)({declarations:[p.a,m.a,f.a,h.a,g.a],imports:[i.CommonModule,a.FormsModule,o.a,s.MaterializeModule,d.FileUploadModule,l.Ng2PaginationModule,c.TextMaskModule,v.Ng2OrderModule,u.a],providers:[]})],y)},"8Ipi":function(t,e,n){"use strict";var r=n("3j3K"),i=n("2Je8"),a=n("5oXY"),o=n("cfoZ"),s=n.n(o),d=n("I1pV"),l=n("3aLi"),c=n("IE+2"),v=n("L9Xm");n.d(e,"a",function(){return f});var u=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=s()({prefix:"R$",allowDecimal:!0,integerLimit:7,decimalLimit:2,thousandsSeparatorSymbol:".",decimalSymbol:","}),f=function(){function t(t,e,n,i,a){this.vendasService=t,this.clientesService=e,this.itensService=n,this.route=i,this.router=a,this.maskMoney=m,this.globalActions=new r.EventEmitter,this.itens=[],this.clientes=[],this.servicos=[],this.produtos=[],this.baseUrl=v.a.API_ENDPOINT,this.venda={cliente:{images:[]},itens:[],valor_total:0,observacao:void 0,tipo:void 0},this.novoItem={item:{valor_venda:void 0,images:[]},qntde:void 0,validade:void 0,total:void 0,tipo:void 0}}return t.prototype.ngOnInit=function(){var t=this;this.inscricao=this.route.params.subscribe(function(e){t.vendasService.getVenda(e.id).subscribe(function(e){t.venda=e,t.tipoVenda=t.venda.tipo,t.venda.valor_total=t.formatDecimal(t.venda.valor_total)})}),this.itensService.getItens().subscribe(function(e){for(var n=0;n<e.length;++n)e[n].valor_custo?t.produtos.push(e[n]):t.servicos.push(e[n]),t.itens.push(e[n]),t.venda.itens.filter(function(t){t.item._id===e[n]._id&&(e[n].selected=!0)})}),this.clientesService.getClientes().subscribe(function(e){t.clientes=e})},t.prototype.formatDecimal=function(t){return"number"==typeof t&&(t=t.toString()),-1!==t.indexOf("R$")&&(t=t.replace("R$","")),-1!==t.indexOf(".")&&(t=t.split(".").join("")),-1!==t.indexOf(",")&&(t=t.replace(",",".")),t},t.prototype.setCliente=function(){for(var t=0;t<this.clientes.length;++t)this.venda.cliente._id===this.clientes[t]._id&&(this.venda.cliente=this.clientes[t])},t.prototype.addItem=function(){if(!this.novoItem.item._id)return!1;this.venda.itens.push(this.novoItem),this.resetNovoItem()},t.prototype.resetNovoItem=function(){this.novoItem={item:{images:[],_id:"",nome:""},qntde:void 0,validade:void 0,total:void 0,tipo:void 0}},t.prototype.verificaQntdeMax=function(t){if(t.qntde>=t.item.qntde_atual)return this.triggerToast("Apenas "+t.item.qntde_atual+" unidades existentes em estoque","blue"),t.qntde=t.item.qntde_atual,!1},t.prototype.sum=function(t){var e=parseFloat(this.venda.itens[t].item.valor_venda.replace("R$","").replace(".","").replace(".","").replace(",",".")),n=e*this.venda.itens[t].qntde;this.venda.itens[t].total=n.toString().replace(".",",");for(var r=0,i=0;i<this.venda.itens.length;++i)this.venda.itens[i].total&&(r+=parseFloat(this.venda.itens[i].total.replace(".","").replace(".","").replace(",",".")));this.venda.valor_total=r},t.prototype.updateVenda=function(t){var e=this;if(!this.venda.cliente.length&&this.venda.itens.length<=1)return this.triggerToast("Adicione ao menos 1 produto","red"),!1;this.vendasService.updateVenda(this.venda).subscribe(function(t){e.router.navigate(["vendas"]),e.triggerToast("Venda editada com sucesso!","green")})},t.prototype.ngAfterViewChecked=function(){Materialize.updateTextFields&&Materialize.updateTextFields()},t.prototype.triggerToast=function(t,e){this.globalActions.emit({action:"toast",params:[t,4e3,e]})},t.prototype.currencyPipe=function(t,e,n,r){return void 0===e&&(e="BRL"),void 0===n&&(n=!0),t?new i.CurrencyPipe("pt-BR").transform(t,e,n,r).replace("R$",""):""},t.prototype.setNovoItem=function(t){var e=this;if(!this.novoItem.item._id)return!1;this.itens.filter(function(n){if(n._id===e.novoItem.item._id)if(n.selected)e.resetNovoItem(),e.triggerToast("Item sendo usado!","");else{if(n.selected=!0,e.novoItem.item=n,e.novoItem.tipo=!!e.novoItem.item.valor_custo,e.novoItem.qntde=t?t.qntde:1,e.novoItem.tipo){var r=new Date;r.setMonth(r.getMonth()+12),e.novoItem.validade=t?t.validade:r.toLocaleDateString("pt-BR")}else e.novoItem.validade=void 0;e.sumNovo(!0)}})},t.prototype.deleteRow=function(t){this.venda.itens=this.venda.itens.filter(function(e){if(e.item._id!==t._id)return e}),this.itens.filter(function(e){e._id===t._id&&(e.selected=!1)})},t.prototype.editarRow=function(t){this.novoItem.item=t.item,this.deleteRow(t.item),this.setNovoItem(t)},t.prototype.sumNovo=function(t){var e=parseFloat(this.formatDecimal(this.novoItem.item.valor_venda)),n=e*this.novoItem.qntde;this.novoItem.total=n.toFixed(2).toString().replace(".",","),t||this.verificaQntdeMax(this.novoItem)},t.prototype.valorTotal=function(){for(var t=0,e=0;e<this.venda.itens.length;++e){t+=parseFloat(this.formatDecimal(this.venda.itens[e].total))}return this.venda.valor_total=this.currencyPipe(t),t},t}();f=u([n.i(r.Component)({selector:"app-editar-venda",template:n("GEuV"),styles:[n("Das5")]}),p("design:paramtypes",["function"==typeof(h=void 0!==d.a&&d.a)&&h||Object,"function"==typeof(g=void 0!==l.a&&l.a)&&g||Object,"function"==typeof(b=void 0!==c.a&&c.a)&&b||Object,"function"==typeof(y=void 0!==a.b&&a.b)&&y||Object,"function"==typeof(x=void 0!==a.c&&a.c)&&x||Object])],f);var h,g,b,y,x},"8kQ3":function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,".row .col.s05{width:5.3%}.row .col.s1105{width:94.7%}",""]),t.exports=t.exports.toString()},A8Rp:function(t,e,n){"use strict";var r=n("3j3K"),i=n("5oXY"),a=n("biG6"),o=n("rZWe"),s=n("8Ipi"),d=n("rgVv");n.d(e,"a",function(){return v});var l=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o},c=[{path:"",component:a.a},{path:"novo",component:d.a},{path:":id",component:o.a},{path:":id/editar",component:s.a}],v=function(){function t(){}return t}();v=l([n.i(r.NgModule)({imports:[i.a.forChild(c)],exports:[i.a]})],v)},Das5:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},G9lP:function(t,e){t.exports='<nav class="header-pages white">\r\n\t<div class="nav-wrapper">\r\n\t\t<div class="col s12">\r\n\t\t\t<a routerLink="/vendas" class="breadcrumb">Lista de Vendas</a>\r\n\t\t\t<span class="breadcrumb">Detalhe da Venda</span>\r\n\t\t</div>\r\n\t</div>\r\n</nav>\r\n\x3c!-- Carregando --\x3e\r\n<div class="row" *ngIf="!loadStatus">\r\n\t<div class="col s12">\r\n\t\t<div id="loader" class="preloader-wrapper big active">\r\n\t\t\t<div class="spinner-layer spinner-red-only">\r\n\t\t\t\t<div class="circle-clipper left">\r\n\t\t\t\t\t<div class="circle"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="gap-patch">\r\n\t\t\t\t\t<div class="circle"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="circle-clipper right">\r\n\t\t\t\t\t<div class="circle"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\x3c!-- Botoes de ação --\x3e\r\n<div class="row" *ngIf="venda&&loadStatus">\r\n\t<div class="col s12 right-align">\r\n\t\t<a target="_blank" href="{{ urlPdf }}" class="modal-action modal-close waves-effect waves-light btn blue darken-4">Emitir PDF</a>\r\n\t\t<a class="waves-effect waves-light btn red darken-1" [routerLink]="[\'/vendas\', venda._id, \'editar\']">Editar</a>\r\n\t\t<a class="waves-effect waves-light btn grey darken-4" (click)="deleteVenda(venda)">Excluir</a>\r\n\t\t<a class="waves-effect waves-light btn grey" routerLink="/vendas">Cancelar</a>\r\n\t</div>\r\n</div>\r\n<div class="section"></div>\r\n<div class="row" *ngIf="venda&&loadStatus">\r\n\t<div class="col s12">\r\n\t\t<div class="row">\r\n\t\t\t<div class="col s12">\r\n\t\t\t\t<div class="section">\r\n\t\t\t\t\t<h4>Venda para {{ venda?.cliente?.nome }}</h4>\r\n\t\t\t\t\t<div class="divider"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\x3c!-- Valor total --\x3e\r\n\t\t\t\t<div class="row">\r\n\t\t\t\t\t<div class="col s12">\r\n\t\t\t\t\t\t<label>Valor total</label>\r\n\t\t\t\t\t\t<h5>{{ \'R$\' + venda.valor_total }}</h5>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\x3c!-- Observacao --\x3e\r\n\t\t\t\t<div class="row">\r\n\t\t\t\t\t<div class="col s12">\r\n\t\t\t\t\t\t<label>Observação</label>\r\n\t\t\t\t\t\t<h5>{{ venda.observacao }}</h5>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\x3c!-- Tipo --\x3e\r\n\t\t\t\t<div class="row">\r\n\t\t\t\t\t<div class="col s12">\r\n\t\t\t\t\t\t<label>Tipo</label>\r\n\t\t\t\t\t\t<h5>{{ !venda.tipo?\'Orçamento\':\'Pedido\' }}</h5>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\x3c!-- Data --\x3e\r\n\t\t\t\t<div class="row">\r\n\t\t\t\t\t<div class="col s12">\r\n\t\t\t\t\t\t<label>Data de criação</label>\r\n\t\t\t\t\t\t<h5>{{ venda.updatedAt | date:\'dd/MM/yyyy hh:mm:ss\' }}</h5>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n<div class="row">\r\n\t<div class="col s12">\r\n\t\t<div class="row">\r\n\t\t\t<div class="col s12">\r\n\t\t\t\t<div class="section">\r\n\t\t\t\t\t<h4>Cliente</h4>\r\n\t\t\t\t\t<div class="divider"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\x3c!-- Fotos --\x3e\r\n\t\t\t\t<div class="row">\r\n\t\t\t\t\t<div class="col s12">\r\n\t\t\t\t\t\t<label>Imagens</label>\r\n\t\t\t\t\t\t<br>\r\n\t\t\t\t\t\t<img src="{{ baseUrl + \'uploads/\' + (!venda.cliente?.images[0] ? \'sem-foto.jpg\' : venda.cliente?.images[0]) }}" class="circle img-table">\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\x3c!-- nome --\x3e\r\n\t\t\t\t<div class="row">\r\n\t\t\t\t\t<div class="col s12">\r\n\t\t\t\t\t\t<label>Nome</label>\r\n\t\t\t\t\t\t<h5>{{ venda?.cliente?.nome }}</h5>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\x3c!-- comprador --\x3e\r\n\t\t\t\t<div class="row">\r\n\t\t\t\t\t<div class="col s12">\r\n\t\t\t\t\t\t<label>Comprador</label>\r\n\t\t\t\t\t\t<h5>{{ venda?.cliente?.comprador }}</h5>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t\x3c!-- Representante --\x3e\r\n\t\t\t\t<div class="row">\r\n\t\t\t\t\t<div class="col s12">\r\n\t\t\t\t\t\t<label>Representante</label>\r\n\t\t\t\t\t\t<h5>{{ venda?.cliente?.representante }}</h5>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class="row">\r\n\t\t<div class="row">\r\n\t\t\t<div class="col s12">\r\n\t\t\t\t<div class="section">\r\n\t\t\t\t\t<h4>Itens</h4>\r\n\t\t\t\t\t<div class="divider"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="row">\r\n\t\t\t\t\t<div class="col s12">\r\n\t\t\t\t\t\t<table class="striped bordered responsive-table">\r\n\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<th data-field="nome">Produtos / Serviços</th>\r\n\t\t\t\t\t\t\t\t\t<th data-field="unit">Valor Unitário</th>\r\n\t\t\t\t\t\t\t\t\t<th data-field="qntde">Quantidade</th>\r\n\t\t\t\t\t\t\t\t\t<th data-field="total">Total da Venda</th>\r\n\t\t\t\t\t\t\t\t\t<th data-field="valida">Validade desta Venda</th>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t<tr *ngFor="let item of venda?.itens; let i = index; let last = last;let first = first;">\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<img src="{{ baseUrl + \'uploads/\' + (!venda?.itens[i]?.item.images[0] ? \'sem-foto.jpg\' : venda?.itens[i]?.item.images[0]) }}" class="circle img-table">\r\n\t\t\t\t\t\t\t\t\t\t{{ venda?.itens[i].item.nome }}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>{{ venda?.itens[i].item.valor_venda | currencyformat }}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{{ venda?.itens[i].qntde }}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{{ venda?.itens[i].total | currencyformat }}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{{ venda?.itens[i].validade }}</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n</div>\r\n<a (click)="triggerToast()" materialize [materializeActions]="globalActions"></a>'},GEuV:function(t,e){t.exports='<nav class="header-pages white">\r\n\t<div class="nav-wrapper">\r\n\t\t<div class="col s12">\r\n\t\t\t<a routerLink="/vendas" class="breadcrumb">Lista de Vendas</a>\r\n\t\t\t<a [routerLink]="[\'/vendas\', venda._id]" class="breadcrumb">Detalhe da Venda</a>\r\n\t\t\t<span class="breadcrumb">Editar Venda</span>\r\n\t\t</div>\r\n\t</div>\r\n</nav>\r\n<form (submit)="updateVenda($event)">\r\n\t\x3c!-- Botoes de ação --\x3e\r\n\t<div class="row">\r\n\t\t<div class="col s12 right-align">\r\n\t\t\t<button type="submit" class="waves-effect waves-light btn red darken-1" name="action">Salvar e Cadastrar</button>\r\n\t\t\t<a class="modal-action modal-close waves-effect waves-light btn grey" [routerLink]="[\'/vendas\', venda._id]">Cancelar e VOltar</a>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="section"></div>\r\n\t<div class="row">\r\n\t\t<div class="col s12">\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col s12">\r\n\t\t\t\t\t<div class="row valign-wrapper">\r\n\t\t\t\t\t\t<div class="col s8">\r\n\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t<div class="col s1">\r\n\t\t\t\t\t\t\t\t\t<img [src]="baseUrl + \'uploads/\' + (!venda.cliente.images[0] ? \'sem-foto.jpg\' : venda.cliente.images[0])" alt="{{venda.cliente.nome}}" class="responsive-img circle img-table" title="{{venda.cliente.nome}}">\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="col s11">\r\n\t\t\t\t\t\t\t\t\t<div class="input-field">\r\n\t\t\t\t\t\t\t\t\t\t<select \r\n\t\t\t\t\t\t\t\t\t\tid="cliente" \r\n\t\t\t\t\t\t\t\t\t\tmaterialize="material_select" \r\n\t\t\t\t\t\t\t\t\t\t[materializeSelectOptions]="clientes" \r\n\t\t\t\t\t\t\t\t\t\t[(ngModel)]="venda.cliente._id" \r\n\t\t\t\t\t\t\t\t\t\tname="cliente"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t  <option value="" disabled selected>Selecione o cliente</option>\r\n\t\t\t\t\t\t\t\t\t\t  <option \r\n\t\t\t\t\t\t\t\t\t\t  *ngFor="let cliente of clientes" \r\n\t\t\t\t\t\t\t\t\t\t  [attr.data-icon]="baseUrl + \'uploads/\' + (!cliente.images[0] ? \'sem-foto.jpg\' : cliente.images[0])" \r\n\t\t\t\t\t\t\t\t\t\t  [value]="cliente._id"\r\n\t\t\t\t\t\t\t\t\t\t  class="left circle"\r\n\t\t\t\t\t\t\t\t\t\t  >{{cliente.nome}}</option>\r\n\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t\t<label for="cliente">Selecione o cliente</label>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class="col s4 center-align">\r\n\t\t\t\t\t\t\t\x3c!-- Switch --\x3e\r\n\t\t\t\t\t\t\t<div class="switch">\r\n\t\t\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t\t\tOrçamento\r\n\t\t\t\t\t\t\t\t\t<input type="checkbox" [(ngModel)]="venda.tipo" name="tipo">\r\n\t\t\t\t\t\t\t\t\t<span class="lever"></span>\r\n\t\t\t\t\t\t\t\t\tPedido (Baixa no estoque)\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="section"></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\x3c!-- Sem nenhum serviço ou produtos --\x3e\r\n\t\t\t\t\t<div class="row" *ngIf="!produtos?.length&&!servicos?.length">\r\n\t\t\t\t\t\t<div class="col s12">\r\n\t\t\t\t\t\t\t<div class="section"></div>\r\n\t\t\t\t\t\t\t<div class="center-align">\r\n\t\t\t\t\t\t\t\t<div class="grey-text text-lighten-2">\r\n\t\t\t\t\t\t\t\t\t<h2>Nenhum produto e/ou serviço cadastrado <br><small>necessário para adiciona-los a uma nova venda</small></h2>\r\n\t\t\t\t\t\t\t\t\t<i class="material-icons big">&#xE814;</i>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div *ngIf="venda.cliente._id&&(produtos?.length||servicos?.length)">\r\n\t\t\t\t\t\t<table class="bordered responsive-table">\r\n\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<th data-field="foto"></th>\r\n\t\t\t\t\t\t\t\t\t<th data-field="item">Produtos / Serviços</th>\r\n\t\t\t\t\t\t\t\t\t<th data-field="valor_venda">Valor Unitário</th>\r\n\t\t\t\t\t\t\t\t\t<th data-field="qntde">Quant.</th> \r\n\t\t\t\t\t\t\t\t\t<th data-field="total">Total</th>\r\n\t\t\t\t\t\t\t\t\t<th data-field="validade">Validade</th>\r\n\t\t\t\t\t\t\t\t\t<th data-field="acoes" class="center-align">Ações</th>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t<tr *ngFor="let item of venda.itens; let i = index">\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<img [src]="baseUrl + \'uploads/\' + (!venda.itens[i].item?.images[0] ? \'sem-foto.jpg\' : venda.itens[i].item?.images[0])" alt="{{venda.itens[i].item.nome}}" class="responsive-img circle img-table" title="{{venda.itens[i].item.nome}}">\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t{{ venda.itens[i].item.nome }}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t{{ venda.itens[i].item.valor_venda }}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t{{ venda.itens[i].qntde }}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t{{ venda.itens[i].total }}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t{{ venda.itens[i].validade }}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td class="center-align">\r\n\t\t\t\t\t\t\t\t\t\t<a class="waves-effect waves-light btn red darken-1" (click)="editarRow(venda.itens[i])">Editar</a>\r\n\t\t\t\t\t\t\t\t\t\t<a class="waves-effect waves-light btn grey darken-4" (click)="deleteRow(venda.itens[i].item)">Excluir</a>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\x3c!-- ///////////////////////////////////////////////////// --\x3e\r\n\t\t\t\t\t\t\x3c!-- ///////////////// Novo Item ///////////////////////// --\x3e\r\n\t\t\t\t\t\t\x3c!-- ///////////////////////////////////////////////////// --\x3e\r\n\t\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<img [src]="baseUrl + \'uploads/\' + (!novoItem.item?.images[0] ? \'sem-foto.jpg\' : novoItem.item?.images[0])" alt="{{novoItem.item.nome}}" class="responsive-img circle img-table" title="{{novoItem.item.nome}}">\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<div class="input-field">\r\n\t\t\t\t\t\t\t\t\t\t\t<select \r\n\t\t\t\t\t\t\t\t\t\t\tid="novoItem" \r\n\t\t\t\t\t\t\t\t\t\t\tmaterialize="material_select" \r\n\t\t\t\t\t\t\t\t\t\t\t[materializeSelectOptions]="itens" \r\n\t\t\t\t\t\t\t\t\t\t\t[(ngModel)]="novoItem.item._id" \r\n\t\t\t\t\t\t\t\t\t\t\tname="novoItem"\r\n\t\t\t\t\t\t\t\t\t\t\t(change)="setNovoItem()" \r\n\t\t\t\t\t\t\t\t\t\t\t[attr.required]="novoItem.item.nome ? true : undefined"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<option value="" disabled selected>Selecione</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<optgroup label="Produtos" *ngIf="produtos?.length">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t*ngFor="let produto of produtos" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t[value]="produto._id"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t[attr.data-icon]="baseUrl + \'uploads/\' + (!produto.images[0] ? \'sem-foto.jpg\' : produto.images[0])" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="left circle"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>{{produto.nome}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</optgroup>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<optgroup label="Servicos" *ngIf="servicos?.length">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t*ngFor="let servico of servicos" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t[value]="servico._id"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t[attr.data-icon]="baseUrl + \'uploads/\' + (!servico.images[0] ? \'sem-foto.jpg\' : servico.images[0])" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="left circle"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>{{servico.nome}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</optgroup>\r\n\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<div class="input-field">\r\n\t\t\t\t\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\t\t\t\tid="valor_venda" \r\n\t\t\t\t\t\t\t\t\t\t\tclass="decimal" \r\n\t\t\t\t\t\t\t\t\t\t\ttype="text" \r\n\t\t\t\t\t\t\t\t\t\t\t[(ngModel)]="novoItem.item.valor_venda" \r\n\t\t\t\t\t\t\t\t\t\t\tname="valor_venda{{i}}" \r\n\t\t\t\t\t\t\t\t\t\t\t[attr.required]="novoItem.item.nome ? true : undefined"\r\n\t\t\t\t\t\t\t\t\t\t\treadonly="true" \r\n\t\t\t\t\t\t\t\t\t\t\t[textMask]="{mask: maskMoney}"\r\n\t\t\t\t\t\t\t\t\t\t\t[disabled]="!novoItem.item.nome"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<label for="valor_venda">Valor unitário</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<div class="input-field">\r\n\t\t\t\t\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\t\t\t\tid="qntde" \r\n\t\t\t\t\t\t\t\t\t\t\tmin="1" \r\n\t\t\t\t\t\t\t\t\t\t\t[max]="novoItem.item.qntde_atual" \r\n\t\t\t\t\t\t\t\t\t\t\ttype="number" \r\n\t\t\t\t\t\t\t\t\t\t\t(change)="sumNovo()" \r\n\t\t\t\t\t\t\t\t\t\t\t[(ngModel)]="novoItem.qntde" \r\n\t\t\t\t\t\t\t\t\t\t\tname="qntde" \r\n\t\t\t\t\t\t\t\t\t\t\t[attr.required]="novoItem.item.nome ? true : undefined"\r\n\t\t\t\t\t\t\t\t\t\t\t[disabled]="!novoItem.item.nome"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<label for="qntde">Quantidade</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<div class="input-field">\r\n\t\t\t\t\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\t\t\t\tid="total" \r\n\t\t\t\t\t\t\t\t\t\t\tclass="decimal" \r\n\t\t\t\t\t\t\t\t\t\t\ttype="text" \r\n\t\t\t\t\t\t\t\t\t\t\t[(ngModel)]="novoItem.total" \r\n\t\t\t\t\t\t\t\t\t\t\tname="total" \r\n\t\t\t\t\t\t\t\t\t\t\treadonly="true" \r\n\t\t\t\t\t\t\t\t\t\t\t[attr.required]="novoItem.item.nome ? true : undefined"\r\n\t\t\t\t\t\t\t\t\t\t\t[textMask]="{mask: maskMoney}"\r\n\t\t\t\t\t\t\t\t\t\t\t[disabled]="!novoItem.item.nome"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<label for="total">Valor total</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<div class="input-field">\r\n\t\t\t\t\t\t\t\t\t\t\t<label for="validade">Validade deste produto</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\t\t\t\tid="validade" \r\n\t\t\t\t\t\t\t\t\t\t\tmaterialize="pickadate" \r\n\t\t\t\t\t\t\t\t\t\t\t[materializeParams]="[paramsPickdate]"\r\n\t\t\t\t\t\t\t\t\t\t\ttype="date" \r\n\t\t\t\t\t\t\t\t\t\t\t[(ngModel)]="novoItem.validade" \r\n\t\t\t\t\t\t\t\t\t\t\tname="validade" \r\n\t\t\t\t\t\t\t\t\t\t\t[attr.required]="novoItem.item.nome ? true : undefined"\r\n\t\t\t\t\t\t\t\t\t\t\t[disabled]="!novoItem.tipo || !novoItem.item.nome"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<a class="right waves-effect waves-light btn red darken-1" (click)="addItem()" [class.disabled]="!novoItem.item.nome">Salvar</a>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t<div class="row valign-wrapper">\r\n\t\t\t\t\t\t\t<div class="col s8">\r\n\t\t\t\t\t\t\t\t<div class="input-field">\r\n\t\t\t\t\t\t\t\t\t<textarea \r\n\t\t\t\t\t\t\t\t\tid="observacoes" \r\n\t\t\t\t\t\t\t\t\tclass="materialize-textarea" \r\n\t\t\t\t\t\t\t\t\tdata-length="120" \r\n\t\t\t\t\t\t\t\t\t[(ngModel)]="venda.observacao" \r\n\t\t\t\t\t\t\t\t\tname="observacao"\r\n\t\t\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t\t\t\t<label for="observacoes">Observações</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col s4 center-align">\r\n\t\t\t\t\t\t\t\t<h5>Valor Total</h5>\r\n\t\t\t\t\t\t\t\t<h4>{{ valorTotal() || \'0\' | currencyformat }}</h4>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</form>\r\n<a (click)="triggerToast()" materialize [materializeActions]="globalActions"></a>'},KLDm:function(t,e){t.exports='<nav class="header-pages white">\r\n\t<div class="nav-wrapper">\r\n\t\t<div class="col s12">\r\n\t\t\t<a routerLink="/vendas" class="breadcrumb">Lista de Vendas</a>\r\n\t\t\t<span class="breadcrumb">Nova Venda</span>\r\n\t\t</div>\r\n\t</div>\r\n</nav>\r\n\x3c!-- Carregando --\x3e\r\n<div class="row" *ngIf="!loadStatus">\r\n\t<div class="col s12">\r\n\t\t<div id="loader" class="preloader-wrapper big active">\r\n\t\t\t<div class="spinner-layer spinner-red-only">\r\n\t\t\t\t<div class="circle-clipper left">\r\n\t\t\t\t\t<div class="circle"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="gap-patch">\r\n\t\t\t\t\t<div class="circle"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="circle-clipper right">\r\n\t\t\t\t\t<div class="circle"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\x3c!-- Sem nenhum cliente --\x3e\r\n<div class="row" *ngIf="!clientes?.length&&loadStatus">\r\n\t<div class="col s12">\r\n\t\t<div class="section"></div>\r\n\t\t<div class="center-align">\r\n\t\t\t<div class="grey-text text-lighten-2">\r\n\t\t\t\t<h2>Nenhum cliente cadastrado <br><small>necessário para que se crie uma nova venda</small></h2>\r\n\t\t\t\t<i class="material-icons big">&#xE814;</i>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n<form (submit)="novaVenda($event)" *ngIf="clientes?.length">\r\n\t\x3c!-- Botoes de ação --\x3e\r\n\t<div class="row">\r\n\t\t<div class="col s12 right-align">\r\n\t\t\t<button type="submit" class="waves-effect waves-light btn red darken-1" name="action">Salvar e Cadastrar</button>\r\n\t\t\t<a class="modal-action modal-close waves-effect waves-light btn grey" routerLink="/vendas">Cancelar e Voltar</a>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class="section"></div>\r\n\t<div class="row">\r\n\t\t<div class="col s12">\r\n\t\t\t<div class="row">\r\n\t\t\t\t<div class="col s12">\r\n\t\t\t\t\t<div class="row valign-wrapper">\r\n\t\t\t\t\t\t<div class="col s8">\r\n\t\t\t\t\t\t\t<div class="row">\r\n\t\t\t\t\t\t\t\t<div class="col s1">\r\n\t\t\t\t\t\t\t\t\t<img [src]="baseUrl + \'uploads/\' + (!venda.cliente.images[0] ? \'sem-foto.jpg\' : venda.cliente.images[0])" alt="{{venda.cliente.nome}}" class="responsive-img circle img-table" title="{{venda.cliente.nome}}">\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class="col s11">\r\n\t\t\t\t\t\t\t\t\t<div class="input-field">\r\n\t\t\t\t\t\t\t\t\t\t<select \r\n\t\t\t\t\t\t\t\t\t\tid="cliente" \r\n\t\t\t\t\t\t\t\t\t\tmaterialize="material_select" \r\n\t\t\t\t\t\t\t\t\t\t[materializeSelectOptions]="clientes" \r\n\t\t\t\t\t\t\t\t\t\t[(ngModel)]="venda.cliente" \r\n\t\t\t\t\t\t\t\t\t\tname="cliente"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t  <option value="" disabled selected>Selecione o cliente</option>\r\n\t\t\t\t\t\t\t\t\t\t  <option \r\n\t\t\t\t\t\t\t\t\t\t  *ngFor="let cliente of clientes" \r\n\t\t\t\t\t\t\t\t\t\t  [attr.data-icon]="baseUrl + \'uploads/\' + (!cliente.images[0] ? \'sem-foto.jpg\' : cliente.images[0])" \r\n\t\t\t\t\t\t\t\t\t\t  [ngValue]="cliente" \r\n\t\t\t\t\t\t\t\t\t\t  class="left circle"\r\n\t\t\t\t\t\t\t\t\t\t  >{{cliente.nome}}</option>\r\n\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t\t<label for="cliente">Selecione o cliente</label>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class="col s4 center-align">\r\n\t\t\t\t\t\t\t\x3c!-- Switch --\x3e\r\n\t\t\t\t\t\t\t<div class="switch">\r\n\t\t\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t\t\tOrçamento\r\n\t\t\t\t\t\t\t\t\t<input type="checkbox" [(ngModel)]="venda.tipo" name="tipo">\r\n\t\t\t\t\t\t\t\t\t<span class="lever"></span>\r\n\t\t\t\t\t\t\t\t\tPedido (Baixa no estoque)\r\n\t\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="section"></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t\x3c!-- Sem nenhum serviço ou produtos --\x3e\r\n\t\t\t\t\t<div class="row" *ngIf="!produtos?.length&&!servicos?.length">\r\n\t\t\t\t\t\t<div class="col s12">\r\n\t\t\t\t\t\t\t<div class="section"></div>\r\n\t\t\t\t\t\t\t<div class="center-align">\r\n\t\t\t\t\t\t\t\t<div class="grey-text text-lighten-2">\r\n\t\t\t\t\t\t\t\t\t<h2>Nenhum produto e/ou serviço cadastrado <br><small>necessário para adiciona-los a uma nova venda</small></h2>\r\n\t\t\t\t\t\t\t\t\t<i class="material-icons big">&#xE814;</i>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div *ngIf="venda.cliente._id&&(produtos?.length||servicos?.length)">\r\n\t\t\t\t\t\t<table class="bordered responsive-table">\r\n\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<th data-field="foto"></th>\r\n\t\t\t\t\t\t\t\t\t<th data-field="item">Produtos / Serviços</th>\r\n\t\t\t\t\t\t\t\t\t<th data-field="valor_venda">Valor Unitário</th>\r\n\t\t\t\t\t\t\t\t\t<th data-field="qntde">Quant.</th> \r\n\t\t\t\t\t\t\t\t\t<th data-field="total">Total</th>\r\n\t\t\t\t\t\t\t\t\t<th data-field="validade">Validade</th>\r\n\t\t\t\t\t\t\t\t\t<th data-field="acoes" class="center-align">Ações</th>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t<tr *ngFor="let item of venda.itens; let i = index">\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<img [src]="baseUrl + \'uploads/\' + (!venda.itens[i].item?.images[0] ? \'sem-foto.jpg\' : venda.itens[i].item?.images[0])" alt="{{venda.itens[i].item.nome}}" class="responsive-img circle img-table" title="{{venda.itens[i].item.nome}}">\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t{{ venda.itens[i].item.nome }}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t{{ venda.itens[i].item.valor_venda }}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t{{ venda.itens[i].qntde }}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t{{ venda.itens[i].total }}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t{{ venda.itens[i].validade }}\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td class="center-align">\r\n\t\t\t\t\t\t\t\t\t\t<a class="waves-effect waves-light btn red darken-1" (click)="editarRow(venda.itens[i].item)">Editar</a>\r\n\t\t\t\t\t\t\t\t\t\t<a class="waves-effect waves-light btn grey darken-4" (click)="deleteRow(venda.itens[i].item)">Excluir</a>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t\x3c!-- ///////////////////////////////////////////////////// --\x3e\r\n\t\t\t\t\t\t\x3c!-- ///////////////// Novo Item ///////////////////////// --\x3e\r\n\t\t\t\t\t\t\x3c!-- ///////////////////////////////////////////////////// --\x3e\r\n\t\t\t\t\t\t<table>\r\n\t\t\t\t\t\t\t<tbody>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<img [src]="baseUrl + \'uploads/\' + (!novoItem.item?.images[0] ? \'sem-foto.jpg\' : novoItem.item?.images[0])" alt="{{novoItem.item.nome}}" class="responsive-img circle img-table" title="{{novoItem.item.nome}}">\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<div class="input-field">\r\n\t\t\t\t\t\t\t\t\t\t\t<select \r\n\t\t\t\t\t\t\t\t\t\t\tid="novoItem" \r\n\t\t\t\t\t\t\t\t\t\t\tmaterialize="material_select" \r\n\t\t\t\t\t\t\t\t\t\t\t[materializeSelectOptions]="itens" \r\n\t\t\t\t\t\t\t\t\t\t\t[(ngModel)]="novoItem.item" \r\n\t\t\t\t\t\t\t\t\t\t\tname="novoItem"\r\n\t\t\t\t\t\t\t\t\t\t\t(change)="setNovoItem()" \r\n\t\t\t\t\t\t\t\t\t\t\t[attr.required]="novoItem.item.nome ? true : undefined"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<option value="" disabled selected>Selecione</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<optgroup label="Produtos" *ngIf="produtos?.length">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t*ngFor="let produto of produtos" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t[ngValue]="produto"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t[attr.data-icon]="baseUrl + \'uploads/\' + (!produto.images[0] ? \'sem-foto.jpg\' : produto.images[0])" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="left circle"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>{{produto.nome}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</optgroup>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<optgroup label="Servicos" *ngIf="servicos?.length">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<option \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t*ngFor="let servico of servicos" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t[ngValue]="servico"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t[attr.data-icon]="baseUrl + \'uploads/\' + (!servico.images[0] ? \'sem-foto.jpg\' : servico.images[0])" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass="left circle"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>{{servico.nome}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</optgroup>\r\n\t\t\t\t\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<div class="input-field">\r\n\t\t\t\t\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\t\t\t\tid="valor_venda" \r\n\t\t\t\t\t\t\t\t\t\t\tclass="decimal" \r\n\t\t\t\t\t\t\t\t\t\t\ttype="text" \r\n\t\t\t\t\t\t\t\t\t\t\t[(ngModel)]="novoItem.item.valor_venda" \r\n\t\t\t\t\t\t\t\t\t\t\tname="valor_venda{{i}}" \r\n\t\t\t\t\t\t\t\t\t\t\t[attr.required]="novoItem.item.nome ? true : undefined"\r\n\t\t\t\t\t\t\t\t\t\t\treadonly="true" \r\n\t\t\t\t\t\t\t\t\t\t\t[textMask]="{mask: maskMoney}"\r\n\t\t\t\t\t\t\t\t\t\t\t[disabled]="!novoItem.item.nome"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<label for="valor_venda">Valor unitário</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<div class="input-field">\r\n\t\t\t\t\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\t\t\t\tid="qntde" \r\n\t\t\t\t\t\t\t\t\t\t\tmin="1" \r\n\t\t\t\t\t\t\t\t\t\t\t[max]="novoItem.item.qntde_atual" \r\n\t\t\t\t\t\t\t\t\t\t\ttype="number" \r\n\t\t\t\t\t\t\t\t\t\t\t(change)="sumNovo()" \r\n\t\t\t\t\t\t\t\t\t\t\t[(ngModel)]="novoItem.qntde" \r\n\t\t\t\t\t\t\t\t\t\t\tname="qntde" \r\n\t\t\t\t\t\t\t\t\t\t\t[attr.required]="novoItem.item.nome ? true : undefined"\r\n\t\t\t\t\t\t\t\t\t\t\t[disabled]="!novoItem.item.nome"\r\n\t\t\t\t\t\t\t\t\t\t\t[attr.readonly]="!novoItem.tipo ? true : undefined"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<label for="qntde">Quantidade</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<div class="input-field">\r\n\t\t\t\t\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\t\t\t\tid="total" \r\n\t\t\t\t\t\t\t\t\t\t\tclass="decimal" \r\n\t\t\t\t\t\t\t\t\t\t\ttype="text" \r\n\t\t\t\t\t\t\t\t\t\t\t[(ngModel)]="novoItem.total" \r\n\t\t\t\t\t\t\t\t\t\t\tname="total" \r\n\t\t\t\t\t\t\t\t\t\t\treadonly="true" \r\n\t\t\t\t\t\t\t\t\t\t\t[attr.required]="novoItem.item.nome ? true : undefined"\r\n\t\t\t\t\t\t\t\t\t\t\t[textMask]="{mask: maskMoney}"\r\n\t\t\t\t\t\t\t\t\t\t\t[disabled]="!novoItem.item.nome"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<label for="total">Valor total</label>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<div class="input-field">\r\n\t\t\t\t\t\t\t\t\t\t\t<label for="validade">Validade deste produto</label>\r\n\t\t\t\t\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\t\t\t\tid="validade" \r\n\t\t\t\t\t\t\t\t\t\t\tmaterialize="pickadate" \r\n\t\t\t\t\t\t\t\t\t\t\t[materializeParams]="[paramsPickdate]"\r\n\t\t\t\t\t\t\t\t\t\t\ttype="date" \r\n\t\t\t\t\t\t\t\t\t\t\t[(ngModel)]="novoItem.validade" \r\n\t\t\t\t\t\t\t\t\t\t\tname="validade" \r\n\t\t\t\t\t\t\t\t\t\t\t[attr.required]="novoItem.item.nome ? true : undefined"\r\n\t\t\t\t\t\t\t\t\t\t\t[disabled]="!novoItem.tipo || !novoItem.item.nome"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t\t<td>\r\n\t\t\t\t\t\t\t\t\t\t<a class="right waves-effect waves-light btn red darken-1" (click)="addItem()" [class.disabled]="!novoItem.item.nome">Salvar</a>\r\n\t\t\t\t\t\t\t\t\t</td>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</tbody>\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t<div class="row valign-wrapper">\r\n\t\t\t\t\t\t\t<div class="col s8">\r\n\t\t\t\t\t\t\t\t<div class="input-field">\r\n\t\t\t\t\t\t\t\t\t<textarea \r\n\t\t\t\t\t\t\t\t\tid="observacoes" \r\n\t\t\t\t\t\t\t\t\tclass="materialize-textarea" \r\n\t\t\t\t\t\t\t\t\tdata-length="120" \r\n\t\t\t\t\t\t\t\t\t[(ngModel)]="venda.observacao" \r\n\t\t\t\t\t\t\t\t\tname="observacao"\r\n\t\t\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t\t\t\t<label for="observacoes">Observações</label>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class="col s4 center-align">\r\n\t\t\t\t\t\t\t\t<h5>Valor Total</h5>\r\n\t\t\t\t\t\t\t\t<h4>{{ valorTotal() || \'0\' | currencyformat }}</h4>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</form>\r\n<a (click)="triggerToast()" materialize [materializeActions]="globalActions"></a>'},U2kL:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},VWgf:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n("3j3K"),o=n("NVOs"),s=n("/Zin");e.MASKEDINPUT_VALUE_ACCESSOR={provide:o.NG_VALUE_ACCESSOR,useExisting:a.forwardRef(function(){return d}),multi:!0};var d=function(){function t(t,e){this.renderer=t,this.element=e,this.textMaskConfig={mask:[],guide:!0,placeholderChar:"_",pipe:void 0,keepCharPositions:!1},this._onTouched=function(){},this._onChange=function(t){}}return t.prototype.ngOnChanges=function(t){this.setupMask(),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(this.inputElement.value)},t.prototype.writeValue=function(t){this.inputElement||this.setupMask();var e=null==t?"":t;this.renderer.setElementProperty(this.inputElement,"value",e),void 0!==this.textMaskInputElement&&this.textMaskInputElement.update(t)},t.prototype.registerOnChange=function(t){this._onChange=t},t.prototype.registerOnTouched=function(t){this._onTouched=t},t.prototype.setDisabledState=function(t){this.renderer.setElementProperty(this.element.nativeElement,"disabled",t)},t.prototype.onInput=function(t){this.inputElement||this.setupMask(),void 0!==this.textMaskInputElement&&(this.textMaskInputElement.update(t),t=this.inputElement.value,this.lastValue!==t&&(this.lastValue=t,this._onChange(t)))},t.prototype.setupMask=function(){"INPUT"===this.element.nativeElement.tagName?this.inputElement=this.element.nativeElement:this.inputElement=this.element.nativeElement.getElementsByTagName("INPUT")[0],this.inputElement&&(this.textMaskInputElement=s.createTextMaskInputElement(Object.assign({inputElement:this.inputElement},this.textMaskConfig)))},t}();r([a.Input("textMask"),i("design:type",Object)],d.prototype,"textMaskConfig",void 0),d=r([a.Directive({host:{"(input)":"onInput($event.target.value)","(blur)":"_onTouched()"},selector:"[textMask]",providers:[e.MASKEDINPUT_VALUE_ACCESSOR]}),i("design:paramtypes",[a.Renderer,a.ElementRef])],d),e.MaskedInputDirective=d;var l=function(){function t(){}return t}();l=r([a.NgModule({declarations:[d],exports:[d]})],l),e.TextMaskModule=l;var c=n("/Zin");e.conformToMask=c.conformToMask},biG6:function(t,e,n){"use strict";var r=n("3j3K"),i=n("I1pV"),a=n("L9Xm");n.d(e,"a",function(){return d});var o=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t){this.vendasService=t,this.vendas=[],this.clientes=[],this.produtos=[],this.order="updatedAt",this.reverse=!0,this.loadStatus=!1,this.baseUrl=a.a.API_ENDPOINT}return t.prototype.ngOnInit=function(){var t=this;this.vendasService.getVendas().subscribe(function(e){t.vendas=e,t.loadStatus=!0})},t.prototype.setOrder=function(t){this.order===t&&(this.reverse=!this.reverse),this.order=t},t}();d=o([n.i(r.Component)({selector:"app-vendas",template:n("tadp"),styles:[n("ydGQ")]}),s("design:paramtypes",["function"==typeof(l=void 0!==i.a&&i.a)&&l||Object])],d);var l},cfoZ:function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(2)},,function(t,e){"use strict";function n(){function t(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=t.length;if(t===s||t[0]===h[0]&&1===e)return h.split(s).concat([m]).concat(b.split(s));var n=t.lastIndexOf(O),o=-1!==n,d=t[0]===c&&R,l=void 0,g=void 0,y=void 0;if(t.slice(-1*A)===b&&(t=t.slice(0,-1*A)),o&&(S||j)?(l=t.slice(t.slice(0,D)===h?D:0,n),g=t.slice(n+1,e),g=r(g.replace(u,s))):l=t.slice(0,D)===h?t.slice(D):t,q&&(void 0===q?"undefined":a(q))===p){var I="."===_?"[.]":""+_,w=(l.match(new RegExp(I,"g"))||[]).length;l=l.slice(0,q+w*L)}return l=l.replace(u,s),T||(l=l.replace(/^0+(0$|[^0])/,"$1")),l=x?i(l,_):l,y=r(l),(o&&S||!0===j)&&(t[n-1]!==O&&y.push(f),y.push(O,f),g&&((void 0===P?"undefined":a(P))===p&&(g=g.slice(0,P)),y=y.concat(g)),!0===j&&t[n-1]===O&&y.push(m)),D>0&&(y=h.split(s).concat(y)),d&&(y.length===D&&y.push(m),y=[v].concat(y)),b.length>0&&(y=y.concat(b.split(s))),y}var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.prefix,h=void 0===n?o:n,g=e.suffix,b=void 0===g?s:g,y=e.includeThousandsSeparator,x=void 0===y||y,I=e.thousandsSeparatorSymbol,_=void 0===I?d:I,w=e.allowDecimal,S=void 0!==w&&w,k=e.decimalSymbol,O=void 0===k?l:k,M=e.decimalLimit,P=void 0===M?2:M,C=e.requireDecimal,j=void 0!==C&&C,V=e.allowNegative,R=void 0!==V&&V,E=e.allowLeadingZeroes,T=void 0!==E&&E,N=e.integerLimit,q=void 0===N?null:N,D=h&&h.length||0,A=b&&b.length||0,L=_&&_.length||0;return t.instanceOf="createNumberMask",t}function r(t){return t.split(s).map(function(t){return m.test(t)?m:t})}function i(t,e){return t.replace(/\B(?=(\d{3})+(?!\d))/g,e)}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=n;var o="$",s="",d=",",l=".",c="-",v=/-/,u=/\D+/g,p="number",m=/\d/,f="[]"}])})},rZWe:function(t,e,n){"use strict";var r=n("3j3K"),i=n("5oXY"),a=n("I1pV"),o=n("L9Xm");n.d(e,"a",function(){return l});var s=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,n){this.vendasService=t,this.route=e,this.router=n,this.globalActions=new r.EventEmitter,this.venda={},this.loadStatus=!1,this.baseUrl=o.a.API_ENDPOINT}return t.prototype.ngOnInit=function(){var t=this;this.inscricao=this.route.params.subscribe(function(e){t.vendasService.getVenda(e.id).subscribe(function(e){t.venda=e,t.urlPdf=t.baseUrl+"api/pdf/"+t.venda._id;for(var n=0;n<t.venda.itens.length;++n)t.venda.itens[n].item.valor_venda=t.venda.itens[n].item.valor_venda.replace(".","").replace(".","").replace(",","."),t.venda.itens[n].total=t.venda.itens[n].total.replace(".","").replace(".","").replace(",",".");t.loadStatus=!0})})},t.prototype.deleteVenda=function(t){var e=this;this.vendasService.deleteVenda(t).subscribe(function(t){e.router.navigate(["vendas"]),e.triggerToast("Venda excluida com sucesso!","green")})},t.prototype.triggerToast=function(t,e){this.globalActions.emit({action:"toast",params:[t,4e3,e]})},t}();l=s([n.i(r.Component)({selector:"app-detalhe-venda",template:n("G9lP"),styles:[n("U2kL")]}),d("design:paramtypes",["function"==typeof(c=void 0!==a.a&&a.a)&&c||Object,"function"==typeof(v=void 0!==i.b&&i.b)&&v||Object,"function"==typeof(u=void 0!==i.c&&i.c)&&u||Object])],l);var c,v,u},rgVv:function(t,e,n){"use strict";var r=n("3j3K"),i=n("2Je8"),a=n("5oXY"),o=n("cfoZ"),s=n.n(o),d=n("I1pV"),l=n("3aLi"),c=n("IE+2"),v=n("L9Xm");n.d(e,"a",function(){return f});var u=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,o=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(e,n,o):i(e,n))||o);return a>3&&o&&Object.defineProperty(e,n,o),o},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=s()({prefix:"R$",allowDecimal:!0,integerLimit:7,decimalLimit:2,thousandsSeparatorSymbol:".",decimalSymbol:","}),f=function(){function t(t,e,n,i){this.vendasService=t,this.clientesService=e,this.itensService=n,this.router=i,this.maskMoney=m,this.loadStatus=!1,this.globalActions=new r.EventEmitter,this.baseUrl=v.a.API_ENDPOINT,this.itens=[],this.clientes=[],this.produtos=[],this.servicos=[],this.paramsPickdate={monthsFull:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],monthsShort:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],weekdaysFull:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sabádo"],weekdaysShort:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],today:"Hoje",clear:"Limpar",close:"Pronto",labelMonthNext:"Próximo mês",labelMonthPrev:"Mês anterior",labelMonthSelect:"Selecione um mês",labelYearSelect:"Selecione um ano",format:"dd/mm/yyyy",closeOnSelect:!0,selectMonths:!0,selectYears:15,onSet:function(t){t.select&&this.close()}},this.venda={cliente:{images:[]},itens:[],valor_total:0,observacao:void 0,tipo:void 0},this.novoItem={item:{valor_venda:void 0,images:[]},qntde:void 0,validade:void 0,total:void 0,tipo:void 0}}return t.prototype.ngOnInit=function(){var t=this;this.itensService.getItens().subscribe(function(e){for(var n=0;n<e.length;++n)e[n].qntde_minima&&e[n].qntde_atual>0?t.produtos.push(e[n]):t.servicos.push(e[n]),t.itens.push(e[n])}),this.clientesService.getClientes().subscribe(function(e){t.clientes=e,t.loadStatus=!0})},t.prototype.ngAfterViewChecked=function(){Materialize.updateTextFields&&Materialize.updateTextFields()},t.prototype.resetNovoItem=function(){this.novoItem={item:{images:[]},qntde:void 0,validade:void 0,total:void 0,tipo:void 0}},t.prototype.addItem=function(){if(!this.novoItem.item._id)return!1;this.venda.itens.push(this.novoItem),this.resetNovoItem()},t.prototype.currencyPipe=function(t,e,n,r){return void 0===e&&(e="BRL"),void 0===n&&(n=!0),t?new i.CurrencyPipe("pt-BR").transform(t,e,n,r).replace("R$",""):""},t.prototype.setNovoItem=function(){var t=this;if(!this.novoItem.item._id)return!1;this.itens.filter(function(e){if(e._id===t.novoItem.item._id)if(e.selected)t.resetNovoItem(),t.triggerToast("Produto já está sendo usado!","blue");else{if(e.selected=!0,t.novoItem.tipo=!!t.novoItem.item.valor_custo,t.novoItem.qntde=1,t.novoItem.tipo){var n=new Date;n.setMonth(n.getMonth()+12),t.novoItem.validade=n.toLocaleDateString("pt-BR")}else t.novoItem.validade=void 0;t.sumNovo()}})},t.prototype.formatDecimal=function(t){return"number"==typeof t&&(t=t.toString()),-1!==t.indexOf("R$")&&(t=t.replace("R$","")),-1!==t.indexOf(".")&&(t=t.split(".").join("")),-1!==t.indexOf(",")&&(t=t.replace(",",".")),t},t.prototype.deleteRow=function(t){this.venda.itens=this.venda.itens.filter(function(e){if(e.item._id!==t._id)return e}),this.itens.filter(function(e){e._id===t._id&&(e.selected=!1)})},t.prototype.editarRow=function(t){this.deleteRow(t),this.novoItem.item=t,this.setNovoItem()},t.prototype.sumNovo=function(){var t=parseFloat(this.formatDecimal(this.novoItem.item.valor_venda)),e=t*this.novoItem.qntde;this.novoItem.total=e.toFixed(2).toString().replace(".",","),this.verificaQntdeMax(this.novoItem)},t.prototype.valorTotal=function(){for(var t=0,e=0;e<this.venda.itens.length;++e){t+=parseFloat(this.formatDecimal(this.venda.itens[e].total))}return this.venda.valor_total=this.currencyPipe(t),t},t.prototype.sumRow=function(t){var e=parseFloat(this.formatDecimal(t.item.valor_venda)),n=e*t.qntde;t.total=n.toFixed(2).toString().replace(".",","),this.verificaQntdeMax(t)},t.prototype.verificaQntdeMax=function(t){if(t.qntde>=t.item.qntde_atual)return this.triggerToast("Apenas "+t.item.qntde_atual+" unidades existentes em estoque","blue"),t.qntde=t.item.qntde_atual,!1},t.prototype.novaVenda=function(t){var e=this;if(t.preventDefault(),!this.venda.cliente.length&&!this.venda.itens.length)return this.triggerToast("Adicione ao menos 1 produto","red"),!1;this.vendasService.addVenda(this.venda).subscribe(function(t){e.router.navigate(["vendas"]),e.triggerToast("Venda efetuada com sucesso!","green")})},t.prototype.triggerToast=function(t,e){this.globalActions.emit({action:"toast",params:[t,4e3,e]})},t}();f=u([n.i(r.Component)({selector:"app-nova-venda",template:n("KLDm"),styles:[n("8kQ3")]}),p("design:paramtypes",["function"==typeof(h=void 0!==d.a&&d.a)&&h||Object,"function"==typeof(g=void 0!==l.a&&l.a)&&g||Object,"function"==typeof(b=void 0!==c.a&&c.a)&&b||Object,"function"==typeof(y=void 0!==a.c&&a.c)&&y||Object])],f);var h,g,b,y},tadp:function(t,e){t.exports='<nav class="header-pages white">\r\n\t<div class="nav-wrapper">\r\n\t\t<div class="col s12">\r\n\t\t\t<span class="breadcrumb">Lista de Vendas</span>\r\n\t\t</div>\r\n\t</div>\r\n</nav>\r\n\x3c!-- Botoes de ação --\x3e\r\n<div class="row">\r\n\t<div class="col s12 right-align">\r\n\t\t<a routerLink="novo" class="waves-effect waves-light btn red darken-1">Nova Venda</a>\r\n\t</div>\r\n</div>\r\n<div class="section"></div>\r\n\x3c!-- Carregando --\x3e\r\n<div class="row" *ngIf="!loadStatus">\r\n\t<div class="col s12">\r\n\t\t<div id="loader" class="preloader-wrapper big active">\r\n\t\t\t<div class="spinner-layer spinner-red-only">\r\n\t\t\t\t<div class="circle-clipper left">\r\n\t\t\t\t\t<div class="circle"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="gap-patch">\r\n\t\t\t\t\t<div class="circle"></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class="circle-clipper right">\r\n\t\t\t\t\t<div class="circle"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n\x3c!-- Sem nenhuma venda --\x3e\r\n<div class="row" *ngIf="!vendas.length&&loadStatus">\r\n\t<div class="col s12">\r\n\t\t<div class="section"></div>\r\n\t\t<div class="center-align">\r\n\t\t\t<div class="grey-text text-lighten-2">\r\n\t\t\t\t<h2>Sem nenhuma venda aqui <br><small>clique em Nova Venda</small></h2>\r\n\t\t\t\t<i class="material-icons big">&#xE814;</i>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n<div class="row" *ngIf="vendas.length">\r\n\t<div class="col s12">\r\n\t\t<table class="bordered highlight responsive-table">\r\n\t\t\t<thead>\r\n\t\t\t\t<tr class="orders">\r\n\t\t\t\t\t<th \r\n\t\t\t\t\tdata-field="nome" \r\n\t\t\t\t\t(click)="setOrder(\'nome\')"\r\n\t\t\t\t\t[class.active]="order === \'nome\'"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tNome do cliente\r\n\t\t\t\t\t\t<span [hidden]="reverse">\r\n\t\t\t\t\t\t\t<i class="material-icons right">&#xE5C5;</i>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span [hidden]="!reverse">\r\n\t\t\t\t\t\t\t<i class="material-icons right">&#xE5C7;</i>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</th>\r\n\t\t\t\t\t<th \r\n\t\t\t\t\tdata-field="cidade" \r\n\t\t\t\t\t(click)="setOrder(\'valor_total\')"\r\n\t\t\t\t\t[class.active]="order === \'valor_total\'"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tValor Total\r\n\t\t\t\t\t\t<span [hidden]="reverse">\r\n\t\t\t\t\t\t\t<i class="material-icons right">&#xE5C5;</i>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span [hidden]="!reverse">\r\n\t\t\t\t\t\t\t<i class="material-icons right">&#xE5C7;</i>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</th>\r\n\t\t\t\t\t<th \r\n\t\t\t\t\tdata-field="tipo" \r\n\t\t\t\t\t(click)="setOrder(\'tipo\')"\r\n\t\t\t\t\t[class.active]="order === \'tipo\'"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tTipo\r\n\t\t\t\t\t\t<span [hidden]="reverse">\r\n\t\t\t\t\t\t\t<i class="material-icons right">&#xE5C5;</i>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span [hidden]="!reverse">\r\n\t\t\t\t\t\t\t<i class="material-icons right">&#xE5C7;</i>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</th>\r\n\t\t\t\t\t<th \r\n\t\t\t\t\tdata-field="obs" \r\n\t\t\t\t\t(click)="setOrder(\'observacao\')"\r\n\t\t\t\t\t[class.active]="order === \'observacao\'"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tObs.\r\n\t\t\t\t\t\t<span [hidden]="reverse">\r\n\t\t\t\t\t\t\t<i class="material-icons right">&#xE5C5;</i>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span [hidden]="!reverse">\r\n\t\t\t\t\t\t\t<i class="material-icons right">&#xE5C7;</i>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</th>\r\n\t\t\t\t\t<th \r\n\t\t\t\t\tdata-field="dataCriado" \r\n\t\t\t\t\t(click)="setOrder(\'updatedAt\')"\r\n\t\t\t\t\t[class.active]="order === \'updatedAt\'"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tData Criado\r\n\t\t\t\t\t\t<span [hidden]="reverse">\r\n\t\t\t\t\t\t\t<i class="material-icons right">&#xE5C5;</i>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t<span [hidden]="!reverse">\r\n\t\t\t\t\t\t\t<i class="material-icons right">&#xE5C7;</i>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</th>\r\n\t\t\t\t\t<th></th>\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t\t<tr *ngFor="let venda of vendas | orderBy: order:reverse | paginate: { itemsPerPage: 10, currentPage: p }" [routerLink]="[venda._id]">\r\n\t\t\t\t\t<td>\r\n\t\t\t\t\t\t<img src="{{ baseUrl + \'uploads/\' + (!venda.cliente.images[0] ? \'sem-foto.jpg\' : venda.cliente.images[0]) }}" class="circle img-table">\r\n\t\t\t\t\t\t{{ venda.cliente.nome }}\r\n\t\t\t\t\t</td>\r\n\t\t\t\t\t<td>{{ \'R$\' + venda.valor_total }}</td>\r\n\t\t\t\t\t<td>{{ !venda.tipo ? \'Orçamento\' : \'Pedido\' }}</td>\r\n\t\t\t\t\t<td>{{ venda.observacao || \'---\' }}</td>\r\n\t\t\t\t\t<td>{{ venda.updatedAt | date:\'dd/MM/yyyy HH:mm:ss\' }}</td>\r\n\t\t\t\t\t<td><i class="material-icons">&#xE315;</i></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</tbody>\r\n\t\t</table>\r\n\t\t<pagination-controls \r\n\t\t(pageChange)="p = $event" \r\n\t\tpreviousLabel="Anterior"\r\n        nextLabel="Próximo"\r\n        *ngIf="vendas.length>9"\r\n        ></pagination-controls>\r\n\t</div>\r\n</div>'},ydGQ:function(t,e,n){e=t.exports=n("FZ+f")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()}});