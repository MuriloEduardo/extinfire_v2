<div class="section"></div>
<div class="card-panel right-align">
	<a class="waves-effect waves-light btn red darken-1 modal-trigger" (click)="openModal()"><i class="material-icons right">&#xE146;</i>Novo Produto</a>
</div>
<div class="divider"></div>
<div class="row">
	<div class="col s12" *ngIf="!produtos.length">
		<div class="section"></div>
		<div class="center-align">
			<div class="grey-text text-lighten-2">
				<h2>Sem nenhum produto aqui <br><small>Clique em Novo Produto</small></h2>
				<i class="material-icons big">&#xE814;</i>
			</div>
		</div>
	</div>
	<div *ngIf="produtos.length">
		<div class="col s3" *ngFor="let produto of produtos">
		  <div class="card">
		    <div class="card-image">
		      <img src="http://materializecss.com/images/sample-1.jpg">
		    </div>
		    <div class="card-content">
		    	<span class="card-title truncate"><strong>{{ produto.nome }}</strong></span>
		      	<p>
		      		<strong>Preço:</strong>
		      		<span>R$ {{ produto.valor_venda | number:'.2-2' }}</span>
		      	</p>
		      	<p>
		      		<strong>Estoque:</strong>
		      		<span>{{ produto.qntde_atual }}</span>
		      	</p>
		    </div>
		    <div class="card-action right-align">
				<a class="waves-effect waves-light btn grey darken-4" (click)="deleteProduto(produto._id)">Excluir</a>
				<a class="waves-effect waves-light btn red darken-1" (click)="editProduto(produto)">Editar</a>
	        </div>
		  </div>
		</div>
	</div>
</div>
<!-- Modal Structure -->
<div id="modal1" class="modal modal-fixed-footer" materialize="modal" [materializeParams]="[{dismissible: false}]" [materializeActions]="modalActions">
	<form (submit)="novoProduto($event)">
		<div class="modal-content">
			<div class="row">
				<div class="col s12">
					<h4>Adicionar Novo Produto</h4>
					<p>Seu estoque será contabilizados a cada novo serviço</p>
					<div class="section"></div>
					<div class="row">
						<div class="col-s12">
							<div class="input-field">
								<i class="material-icons prefix red-text text-darken-1">&#xE853;</i>
								<input id="nomeNovoProduto" type="text" class="validate" [(ngModel)]="nome" name="nomeNovoProduto" required="" aria-required="true">
								<label for="nomeNovoProduto" data-error="Inválido" data-success="Válido">Nome do produto</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col s6">
							<div class="input-field">
								<i class="material-icons prefix red-text text-darken-1">&#xE0BE;</i>
								<input id="valorVendaProduto" type="number" step="0.01" min="0.01" max="9999" class="validate" [(ngModel)]="valor_venda" name="valorVendaProduto"  required="" aria-required="true">
								<label for="valorVendaProduto" data-error="Inválido" data-success="Válido">Valor de venda do produto</label>
							</div>
						</div>
						<div class="col s6">
							<div class="input-field">
								<i class="material-icons prefix red-text text-darken-1">&#xE0BE;</i>
								<input id="valorCustoProduto" type="number" step="0.01" min="0.01" max="9999" class="validate" [(ngModel)]="valor_custo" name="valorCustoProduto"  required="" aria-required="true">
								<label for="valorCustoProduto" data-error="Inválido" data-success="Válido">Valor de custo do produto</label>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col s6">
							<div class="input-field">
								<i class="material-icons prefix red-text text-darken-1">&#xE0BE;</i>
								<input id="qntdeMinProduto" type="number" class="validate" min="0" [(ngModel)]="qntde_minima" name="qntdeMinProduto"  required="" aria-required="true">
								<label for="qntdeMinProduto" data-error="Inválido" data-success="Válido">Quantidade mínima</label>
							</div>
						</div>
						<div class="col s6">
							<div class="input-field">
								<i class="material-icons prefix red-text text-darken-1">&#xE0BE;</i>
								<input id="qntdeAtualProduto" type="number" class="validate" min="0" [(ngModel)]="qntde_atual" name="qntdeAtualProduto"  required="" aria-required="true">
								<label for="qntdeAtualProduto" data-error="Inválido" data-success="Válido">Quantidade atual deste produto</label>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="modal-footer">
			<button type="submit" class="waves-effect waves-light btn red darken-1" name="action">Salvar e Cadastrar</button>
			<a class="modal-action modal-close waves-effect waves-light btn grey darken-4" (click)="closeModal()">Cancelar</a>
		</div>
	</form>
</div>